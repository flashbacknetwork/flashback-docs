# Market Actor

The **Market Actor** is a core network component that manages the **storage and retrieval deals** between **clients (service gateways)** and **storage providers (miners)**. It is responsible for handling the economic aspects of these deals, including payments and collateral, and ensuring that both parties fulfill their obligations according to the terms of the agreements.

<mark style="color:red;">It is an abstracted entity, a</mark> <mark style="color:red;"></mark><mark style="color:red;">**pure software component**</mark> <mark style="color:red;"></mark><mark style="color:red;">implemented in Lotus client (or equivalent).</mark>

## **Key Functions of the Market Actor in Filecoin**

<table data-full-width="false"><thead><tr><th width="197">Key Functions</th><th>Description</th></tr></thead><tbody><tr><td><mark style="color:purple;"><strong>Facilitates Storage Deals</strong></mark></td><td><p>The Market Actor allows clients to propose storage deals by specifying the <strong>data size</strong>, <strong>storage duration</strong>, <strong>price</strong>, <strong>collateral requirements</strong>, and <strong>other terms</strong>. Storage providers can accept these deals if they agree with the terms.</p><p><br>Once a deal is accepted, the Market Actor locks the necessary <strong>Filecoin tokens</strong> from the client (for payment) and the storage provider (as collateral) to secure the deal.</p></td></tr><tr><td><mark style="color:purple;"><strong>Manages Retrieval Deals</strong></mark></td><td>The Market Actor handles storage deals and retrieval deals. These deals specify the terms for retrieving stored data, including pricing and payment methods. Clients pay storage providers to retrieve the data they store, and the Market Actor facilitates these payments.</td></tr><tr><td><mark style="color:purple;"><strong>Ensures Deal Fulfillment</strong></mark></td><td><p>The Market Actor tracks the progress of each deal, ensuring that storage providers submit the required <strong>PoRep</strong> and <strong>PoSt</strong> to prove that they are indeed storing the data as agreed.</p><p></p><p>If the storage provider fails to provide the necessary proofs, the Market Actor can <strong>penalize</strong> the provider by slashing their collateral, thus incentivizing storage providers to fulfill their commitments.</p></td></tr><tr><td><mark style="color:purple;"><strong>Handles Deal Payments and Collateral</strong></mark></td><td><p>When a deal is initiated, the Market Actor locks the client's funds and gradually releases payments to the storage provider based on the deal's progress. For retrieval deals, payments are typically made using a <strong>payment channel</strong> model.</p><p></p><p>The Market Actor requires storage providers to stake collateral for each deal. The market Actor holds this collateral to incentivize proper behavior. The collateral is partially or fully forfeited if the provider fails to meet the terms.</p></td></tr><tr><td><mark style="color:purple;"><strong>Acts as an Arbitration Layer</strong></mark></td><td>In cases where there is a dispute between a client and a storage provider (such as if the data is unavailable or not stored correctly), the Market Actor can act as an <strong>arbitration layer</strong> to enforce penalties or rewards based on the evidence (proofs) submitted.</td></tr><tr><td><mark style="color:purple;"><strong>Supports Automated Deal Matching</strong></mark></td><td>The Market Actor allows for <strong>automated deal matching</strong> between clients and storage providers using the <strong>ask-and-bid</strong> model. Storage providers publish their "ask" prices (prices they are willing to accept), while clients submit "bids" (prices they are willing to pay). The Market Actor helps match these asks and bids, streamlining the process.</td></tr><tr><td><mark style="color:purple;"><strong>Maintains On-Chain Records of Deals</strong></mark></td><td>The Market Actor keeps an <strong>on-chain record</strong> of all storage and retrieval deals, including their terms, status, associated payments, and collateral. This provides transparency and accountability within the Filecoin network, ensuring that all parties have access to a verifiable record of agreements.</td></tr><tr><td><mark style="color:purple;"><strong>Facilitates Renewals and Extensions</strong></mark></td><td>The Market Actor can also handle <strong>deal renewals and extensions</strong>. When a deal nears its expiration, the client or storage provider can initiate a renewal or extension, subject to new terms or continued agreements.</td></tr></tbody></table>

## **Technical Overview**

* **Part of Filecoinâ€™s Built-in Actors:**\
  The Market Actor is one of the **built-in actors** in Filecoin's protocol, defined within the Filecoin Specification and implemented in the **Lotus** client software (the primary implementation of the Filecoin protocol).
* **Smart Contract-Like Functionality:**\
  While not a traditional smart contract, the Market Actor behaves like one, managing state and enforcing rules for deal management on the Filecoin blockchain.
* **Interaction with Other Actors:**\
  The Market Actor interacts with other actors, such as the **Storage Miner Actor** (responsible for managing storage and mining operations), **Power Actor** (managing the storage power consensus) and **Account Actors** (representing users and their balances) to coordinate the proper flow of funds, collateral, and deal statuses.
